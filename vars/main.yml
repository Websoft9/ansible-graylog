jdk_version: "8"

common_os_support: ["CentOS", "Ubuntu"]

nginx_certbot: True
nginx_reverse_proxy_port: "9000"
nginx_appname: "graylog"
nginx_vhost_mode: "reverse"

elasticsearch_version: "6.8"
elasticsearch_clurname: "graylog"

mongodb_version: "4.0"    
mongodb_root_password: "123456"
mongodb_root_username: "root"

mongodb_users: 
  - name: graylog
    database_name: graylog
    password: "123456"
    roles: readWrite

docker_applications: 
  - adminmongo

init_db: 
  mongodb:
    admin: root
    users: ["graylog"]
    password: "123456"
    
init_application:
  graylog:
    username: admin
    password: "admin123"
    commands:
      - loginpasswd=$(echo -n $new_password | sha256sum | cut -d " " -f 1)
      - sudo sed -i "s/root_password_sha2 =.*/root_password_sha2 = $loginpasswd/g" /etc/graylog/server/server.conf
      - sudo sed -i 's/#http_publish_uri = .*/http_publish_uri = http':'\/\/'$(curl ifconfig.me)'\//g' /etc/graylog/server/server.conf
      - sudo systemctl restart graylog
      - sudo systemctl restart nginx
